<!DOCTYPE html>
<html>

	<head>
		<meta charset="utf-8">
		<title>变形测试</title>
		<script src="lib/jquery-2.1.1.min.js"></script>
		<script src="lib/pixi.min.js"></script>
		<script src="lib/TweenMax.min.js"></script>
		<script src="js/PlaneMesh.js"></script>
	</head>

	<body>

	</body>

</html>

<script>
	var row = 20;
	var col = 20;

	var targetX = 300;
	var targetY = 300;

	var dotArr = [];

	var app = new PIXI.Application();
	document.body.appendChild(app.view);

	var stage = app.stage;
	var container = new PIXI.Container();
	stage.addChild(container);

	var plane;

	var loader = new PIXI.loaders.Loader();
	loader.add(['images/motty.jpg']);
	loader.once('complete', onLoaded);
	loader.load();

	function onLoaded() {
		var bg = new PIXI.Graphics();
		bg.beginFill(0xFF700B, 1);
		bg.drawRect(0, 0, 1000, 1000);
		container.addChild(bg);

		plane = new PlaneMesh(PIXI.Texture.fromImage("images/motty.jpg"), row, col);
		container.addChild(plane);
		plane.x = 100;
		plane.y = 100;
		container.interactive = true;

		container.on('pointerdown', function(event) {
			this.data = event.data;
			var newPosition = this.data.getLocalPosition(this);

			targetX = newPosition.x;
			targetY = newPosition.y;

			//进入到指定点
			plane.transformIn({
				targetX: targetX,
				targetY: targetY,
				ease: Cubic.easeInOut,
				onComplete: function() {
					console.log('移动完毕！');
				}
			});

			//从指定点出来
			/*plane.transformOut({
				initX: targetX,
				initY: targetY,
				baseTime: 500,
				ease: Back.easeOut,
				onComplete: function() {
					console.log('移动完毕！');
				}
			});*/
		});
	}
</script>